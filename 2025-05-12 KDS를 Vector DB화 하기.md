# JSON 체계
## ✅ 권장 JSON ID 체계

### 🔹 상위 문서: `doc_id`

- 문서 단위 고유 ID (ex: `law_형법_250`)
    
- 해당 ID는 파일명이나 문서 경로 추적에 활용 가능
    

### 🔹 문단 단위: `para_id`

- `doc_id` + `_번호`로 문단을 구분
    
- 하나의 조문 안에 여러 문단이 있을 수 있으니 구분 필요
    

json

복사편집

`[   {     "doc_id": "law_형법_250",     "para_id": "형법_250_1",     "text": "사람을 살해한 자는 사형, 무기 또는 5년 이상의 징역에 처한다."   },   {     "doc_id": "law_형법_250",     "para_id": "형법_250_2",     "text": "형제자매 또는 직계존비속을 살해한 경우에는..."   } ]`

---

## 🧩 참고: 실제 벡터 검색 및 데이터 관리 시 활용

|목적|사용하는 ID|
|---|---|
|벡터 DB 검색 인덱스|`para_id`|
|원문 전체 문서 링크|`doc_id` → 파일명 or DB key로 연결|
|하이라이팅|`doc_id` + `para_id` 위치로 scroll or anchor jump|

---

## ✅ 구조 정리

|요소|예시|설명|
|---|---|---|
|`doc_id`|`law_형법_250`|한 문서(조문, 판례 등)의 고유 ID|
|`para_id`|`형법_250_1`|문단 고유 ID, `doc_id`를 포함하도록 구성|
|파일명 (JSON)|`law_형법_250.json`|문서 단위 저장 시 유용|
|벡터 저장 대상|각 `para_id`의 `text`|임베딩은 문단 단위로|

# 이미지, 표, 수식 관리
---

## ✅ 핵심 개념 요약

> 🔹 **수식, 표, 이미지 → 별도 파일 or 리소스로 분리 저장**  
> 🔹 **문단 JSON에서는 해당 리소스에 대한 ‘참조만’ 유지**  
> 🔹 **프론트는 문단을 보여줄 때만, 이 참조 정보를 통해 실제 리소스를 호출**

---

## 🗂️ 구조 설계 예시

### 📁 디렉터리 구조

pgsql

복사편집

`📂data/ ├── paragraphs/ │   └── 형법_250_1.json ├── equations/ │   └── eq_형법250_1.latex ├── tables/ │   └── tbl_형법250_1.csv ├── images/ │   └── 형법250_그림1.png`

### 🧾 문단 JSON 예시

```json
{
  "doc_id": "law_형법_250조",
  "para_id": "형법250_2",
  "text": "사람을 살해한 자는 사형, 무기 또는 5년 이상의 징역에 처한다.",
  "equations": [
    {
      "id": "eq_250_1",
      "latex": "\\( F = ma \\)",
      "position": 2
    }
  ],
  "tables": [
    {
      "id": "tbl_250_1",
      "csv_path": "tables/형법250_1.csv",
      "position": 3
    }
  ],
  "images": [
    {
      "id": "img_250_1",
      "caption": "그림 2-1. 범죄의 구성요건 체계",
      "path": "images/형법250_그림2-1.png",
      "position": 5
    }
  ]
}

```

### ✅ 프론트에서는?

- 수식: `.latex` 파일을 `MathJax`로 렌더링
    
- 표: `.csv` 파일을 `HTML table`이나 `pandas.to_html()`로 표시
    
- 이미지: 경로만 받아서 `<img src=...>`로 출력
    

---

## 🧠 장점

|항목|효과|
|---|---|
|**가볍고 빠름**|JSON은 텍스트만 → 빠르게 로딩 가능|
|**재활용성**|같은 수식/표/이미지를 여러 문단에서 참조 가능|
|**유지보수 용이**|이미지 파일 수정 시 JSON을 다시 고칠 필요 없음|
|**AI 훈련과 검색 분리**|수식/이미지와 벡터 검색을 분리해서 설계 가능|

---

## 🎯 결론

> ✅ **문단 텍스트는 JSON에,  
> 수식/표/이미지는 별도 파일로 저장하고 참조만 남긴다.**  
> → 프론트는 이 참조를 따라가서 "필요할 때"만 해당 리소스를 로드하면 됨.